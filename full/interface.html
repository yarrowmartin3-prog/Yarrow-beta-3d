<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Version ComplÃ¨te - Yarrow Beta 3D</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="../style.css">
</head>
<body>
  <h1>ğŸŒ± Version ComplÃ¨te - Yarrow Beta 3D</h1>
  <p>Interface avancÃ©e avec capteurs, graphiques et commandes.</p>

  <div class="card">
    <h2>Statut en temps rÃ©el</h2>
    <p>ğŸŒ¡ TempÃ©rature : <span id="temp">-- Â°C</span></p>
    <p>ğŸ’§ HumiditÃ© : <span id="humidity">-- %</span></p>
    <p>ğŸ“Š Niveau dâ€™eau : <span id="water">-- %</span></p>
  </div>

  <div class="card">
    <h2>Graphiques des capteurs</h2>
    <canvas id="tempChart"></canvas>
    <canvas id="humidityChart"></canvas>
    <canvas id="waterChart"></canvas>
  </div>

  <div class="card">
    <h2>ContrÃ´le manuel</h2>
    <button onclick="toggleLed()">ğŸ’¡ LED</button>
    <button onclick="togglePump()">ğŸ’§ Pompe</button>
    <button onclick="toggleFan()">ğŸŒ¬ Ventilateur</button>
  </div>

  <!-- Bouton retour au menu -->
  <p>
    <a href="../menu.html" class="menu-link">â¬…ï¸ Retour au Menu</a>
  </p>

  <script>
    // --- Simulation des donnÃ©es ---
    function getRandom(min, max) {
      return (Math.random() * (max - min) + min).toFixed(1);
    }

    // Initialisation capteurs
    function updateSensors() {
      document.getElementById("temp").textContent = getRandom(20, 25) + " Â°C";
      document.getElementById("humidity").textContent = getRandom(50, 70) + " %";
      document.getElementById("water").textContent = getRandom(60, 90) + " %";
    }
    setInterval(updateSensors, 2000);

    // --- Graphiques ---
    const labels = [];
    const tempData = [];
    const humidityData = [];
    const waterData = [];

    function addData(chart, data) {
      if (chart.data.labels.length > 10) {
        chart.data.labels.shift();
        chart.data.datasets[0].data.shift();
      }
      chart.data.labels.push(new Date().toLocaleTimeString());
      chart.data.datasets[0].data.push(data);
      chart.update();
    }

    const tempChart = new Chart(document.getElementById('tempChart'), {
      type: 'line',
      data: { labels, datasets: [{ label: 'TempÃ©rature (Â°C)', data: tempData, borderColor: 'red' }] },
      options: { responsive: true }
    });

    const humidityChart = new Chart(document.getElementById('humidityChart'), {
      type: 'line',
      data: { labels, datasets: [{ label: 'HumiditÃ© (%)', data: humidityData, borderColor: 'blue' }] },
      options: { responsive: true }
    });

    const waterChart = new Chart(document.getElementById('waterChart'), {
      type: 'line',
      data: { labels, datasets: [{ label: 'Niveau dâ€™eau (%)', data: waterData, borderColor: 'green' }] },
      options: { responsive: true }
    });

    setInterval(() => {
      addData(tempChart, getRandom(20, 25));
      addData(humidityChart, getRandom(50, 70));
      addData(waterChart, getRandom(60, 90));
    }, 2000);

    // --- ContrÃ´les simulÃ©s ---
    function toggleLed() { alert("ğŸ’¡ LED activÃ©e (simulation)"); }
    function togglePump() { alert("ğŸ’§ Pompe activÃ©e (simulation)"); }
    function toggleFan() { alert("ğŸŒ¬ Ventilateur activÃ© (simulation)"); }
  </script>
</body>
</html>
